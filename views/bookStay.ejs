<% layout('layouts/boilerplate') %>

    <!-- The main container implements the Split Layout -->
    <div class="book-container">

        <!-- LEFT SIDE: Visual & Context -->
        <div class="visual-side" style="background-image: url('<%= listing.image.url %>');">
            <div class="visual-overlay"></div>
            <div class="property-info">
                <span class="property-badge">Confirm Your Stay</span>
                <h1 class="booking-title">
                    <%= listing.title %>
                </h1>
                <p class="booking-subtitle">
                    <i class="fa-solid fa-location-dot" style="margin-right: 8px;"></i>
                    <%= listing.location %>, <%= listing.country %>
                </p>
            </div>
        </div>

        <!-- RIGHT SIDE: The Form -->
        <div class="form-side">
            <div class="form-header">
                <h3>Guest Details</h3>
                <p style="color: #666; font-size: 0.9rem; margin-top: 0.5rem;">Please ensure passenger details match
                    their government ID.</p>
            </div>

            <form action="/listings/<%= listing._id %>/book" method="POST" id="bookingForm">

                <div class="passengersContainer">
                    <!-- Javascript will inject passenger cards here -->
                </div>

                <button type="button" class="addPassengerButton">
                    <i class="fa-solid fa-plus" style="margin-right: 8px;"></i> Add Another Guest
                </button>

                <div class="submit-section">
                    <button type="submit" class="submitButton">
                        Confirm Booking <i class="fa-solid fa-arrow-right-long" style="margin-left: 10px;"></i>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script src="/js/bookStay.js"></script>